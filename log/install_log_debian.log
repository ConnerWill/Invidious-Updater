╔═══════════════════════════════════════════════════════════════════╗
║                        Invidious Update.sh                        ║
║               Automatic update script for Invidio.us              ║
║                      Maintained by @tmiland                       ║
║                          version: 1.2.7                           ║
╚═══════════════════════════════════════════════════════════════════╝

Welcome to the Invidious Update.sh script.

What do you want to do?
  1) Install Invidious
  2) Update Invidious
  3) Deploy with Docker
  4) Install Invidious service
  5) Run Database Maintenance
  6) Run Database Migration
  7) Uninstall Invidious
  8) Exit

Documentation for this script is available here: 
➜ https://github.com/tmiland/Invidious-Updater

Select an option [1-8]: 1



╔═══════════════════════════════════════════════════════════════════╗
║                        Invidious Update.sh                        ║
║               Automatic update script for Invidio.us              ║
║                      Maintained by @tmiland                       ║
║                          version: 1.2.7                           ║
╚═══════════════════════════════════════════════════════════════════╝

Thank you for using the Invidious Update.sh script.



Documentation for this script is available here: 
➜ https://github.com/tmiland/Invidious-Updater


Let's go through some configuration options.

Do you want to install Invidious release or master?
  1) release
  2) master

Select an option [1-2]: 1
Do you want to enter advanced options? [y/n]: n


You entered: 

✔ branch     : release
✔ domain     : invidio.us
✔ ip adress  : localhost
✔ port       : 3000
✔ dbname     : invidious
✔ dbpass     : kemal
✔ https only : false


Choose your Imagemagick version :
  1) System's Imagemagick

  (imagemagick/stable,now 8:6.9.7.4+dfsg-11+deb9u6 amd64 [installed,automatic]) 

  2) Imagemagick 6.9.10-28 from source
  3) Imagemagick 7.0.8-28 from source

Select an option [1-3]: 1

Invidious is ready to be installed, press any key to continue...

dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package apt-transport-https.
(Reading database ... 123802 files and directories currently installed.)
Preparing to unpack .../apt-transport-https_1.4.9_amd64.deb ...
Unpacking apt-transport-https (1.4.9) ...
Setting up apt-transport-https (1.4.9) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package liberror-perl.
(Reading database ... 123808 files and directories currently installed.)
Preparing to unpack .../0-liberror-perl_0.17024-1_all.deb ...
Unpacking liberror-perl (0.17024-1) ...
Selecting previously unselected package git-man.
Preparing to unpack .../1-git-man_1%3a2.11.0-3+deb9u4_all.deb ...
Unpacking git-man (1:2.11.0-3+deb9u4) ...
Selecting previously unselected package git.
Preparing to unpack .../2-git_1%3a2.11.0-3+deb9u4_amd64.deb ...
Unpacking git (1:2.11.0-3+deb9u4) ...
Selecting previously unselected package less.
Preparing to unpack .../3-less_481-2.1_amd64.deb ...
Unpacking less (481-2.1) ...
Selecting previously unselected package patch.
Preparing to unpack .../4-patch_2.7.5-1+deb9u1_amd64.deb ...
Unpacking patch (2.7.5-1+deb9u1) ...
Selecting previously unselected package rsync.
Preparing to unpack .../5-rsync_3.1.2-1+deb9u1_amd64.deb ...
Unpacking rsync (3.1.2-1+deb9u1) ...
Setting up git-man (1:2.11.0-3+deb9u4) ...
Setting up less (481-2.1) ...
Processing triggers for mime-support (3.60) ...
Setting up liberror-perl (0.17024-1) ...
Setting up rsync (3.1.2-1+deb9u1) ...
Created symlink /etc/systemd/system/multi-user.target.wants/rsync.service → /lib/systemd/system/rsync.service.
Setting up patch (2.7.5-1+deb9u1) ...
Processing triggers for systemd (232-25+deb9u8) ...
Processing triggers for man-db (2.7.6.1-2) ...
Setting up git (1:2.11.0-3+deb9u4) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package libcurl3:amd64.
(Reading database ... 124738 files and directories currently installed.)
Preparing to unpack .../libcurl3_7.52.1-5+deb9u9_amd64.deb ...
Unpacking libcurl3:amd64 (7.52.1-5+deb9u9) ...
Selecting previously unselected package curl.
Preparing to unpack .../curl_7.52.1-5+deb9u9_amd64.deb ...
Unpacking curl (7.52.1-5+deb9u9) ...
Setting up libcurl3:amd64 (7.52.1-5+deb9u9) ...
Processing triggers for libc-bin (2.24-11+deb9u4) ...
Processing triggers for man-db (2.7.6.1-2) ...
Setting up curl (7.52.1-5+deb9u9) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package sudo.
(Reading database ... 124755 files and directories currently installed.)
Preparing to unpack .../sudo_1.8.19p1-2.1_amd64.deb ...
Unpacking sudo (1.8.19p1-2.1) ...
Setting up sudo (1.8.19p1-2.1) ...
Processing triggers for systemd (232-25+deb9u8) ...
Processing triggers for man-db (2.7.6.1-2) ...
OK
deb https://dist.crystal-lang.org/apt crystal main
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package libpcrecpp0v5:amd64.
(Reading database ... 124866 files and directories currently installed.)
Preparing to unpack .../00-libpcrecpp0v5_2%3a8.39-3_amd64.deb ...
Unpacking libpcrecpp0v5:amd64 (2:8.39-3) ...
Selecting previously unselected package manpages.
Preparing to unpack .../01-manpages_4.10-2_all.deb ...
Unpacking manpages (4.10-2) ...
Selecting previously unselected package binutils.
Preparing to unpack .../02-binutils_2.28-5_amd64.deb ...
Unpacking binutils (2.28-5) ...
Selecting previously unselected package libcc1-0:amd64.
Preparing to unpack .../03-libcc1-0_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libcc1-0:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libitm1:amd64.
Preparing to unpack .../04-libitm1_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libitm1:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libasan3:amd64.
Preparing to unpack .../05-libasan3_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libasan3:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package liblsan0:amd64.
Preparing to unpack .../06-liblsan0_6.3.0-18+deb9u1_amd64.deb ...
Unpacking liblsan0:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libtsan0:amd64.
Preparing to unpack .../07-libtsan0_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libtsan0:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libubsan0:amd64.
Preparing to unpack .../08-libubsan0_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libubsan0:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libcilkrts5:amd64.
Preparing to unpack .../09-libcilkrts5_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libcilkrts5:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libmpx2:amd64.
Preparing to unpack .../10-libmpx2_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libmpx2:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libgcc-6-dev:amd64.
Preparing to unpack .../11-libgcc-6-dev_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libgcc-6-dev:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package gcc-6.
Preparing to unpack .../12-gcc-6_6.3.0-18+deb9u1_amd64.deb ...
Unpacking gcc-6 (6.3.0-18+deb9u1) ...
Selecting previously unselected package gcc.
Preparing to unpack .../13-gcc_4%3a6.3.0-4_amd64.deb ...
Unpacking gcc (4:6.3.0-4) ...
Selecting previously unselected package libc-dev-bin.
Preparing to unpack .../14-libc-dev-bin_2.24-11+deb9u4_amd64.deb ...
Unpacking libc-dev-bin (2.24-11+deb9u4) ...
Selecting previously unselected package linux-libc-dev:amd64.
Preparing to unpack .../15-linux-libc-dev_4.9.144-3_amd64.deb ...
Unpacking linux-libc-dev:amd64 (4.9.144-3) ...
Selecting previously unselected package libc6-dev:amd64.
Preparing to unpack .../16-libc6-dev_2.24-11+deb9u4_amd64.deb ...
Unpacking libc6-dev:amd64 (2.24-11+deb9u4) ...
Selecting previously unselected package libdpkg-perl.
Preparing to unpack .../17-libdpkg-perl_1.18.25_all.deb ...
Unpacking libdpkg-perl (1.18.25) ...
Selecting previously unselected package libevent-core-2.0-5:amd64.
Preparing to unpack .../18-libevent-core-2.0-5_2.0.21-stable-3_amd64.deb ...
Unpacking libevent-core-2.0-5:amd64 (2.0.21-stable-3) ...
Selecting previously unselected package libevent-extra-2.0-5:amd64.
Preparing to unpack .../19-libevent-extra-2.0-5_2.0.21-stable-3_amd64.deb ...
Unpacking libevent-extra-2.0-5:amd64 (2.0.21-stable-3) ...
Selecting previously unselected package libevent-pthreads-2.0-5:amd64.
Preparing to unpack .../20-libevent-pthreads-2.0-5_2.0.21-stable-3_amd64.deb ...
Unpacking libevent-pthreads-2.0-5:amd64 (2.0.21-stable-3) ...
Selecting previously unselected package libevent-openssl-2.0-5:amd64.
Preparing to unpack .../21-libevent-openssl-2.0-5_2.0.21-stable-3_amd64.deb ...
Unpacking libevent-openssl-2.0-5:amd64 (2.0.21-stable-3) ...
Selecting previously unselected package libevent-dev.
Preparing to unpack .../22-libevent-dev_2.0.21-stable-3_amd64.deb ...
Unpacking libevent-dev (2.0.21-stable-3) ...
Selecting previously unselected package libfile-fcntllock-perl.
Preparing to unpack .../23-libfile-fcntllock-perl_0.22-3+b2_amd64.deb ...
Unpacking libfile-fcntllock-perl (0.22-3+b2) ...
Selecting previously unselected package libpcre16-3:amd64.
Preparing to unpack .../24-libpcre16-3_2%3a8.39-3_amd64.deb ...
Unpacking libpcre16-3:amd64 (2:8.39-3) ...
Selecting previously unselected package libpcre32-3:amd64.
Preparing to unpack .../25-libpcre32-3_2%3a8.39-3_amd64.deb ...
Unpacking libpcre32-3:amd64 (2:8.39-3) ...
Selecting previously unselected package libpcre3-dev:amd64.
Preparing to unpack .../26-libpcre3-dev_2%3a8.39-3_amd64.deb ...
Unpacking libpcre3-dev:amd64 (2:8.39-3) ...
Selecting previously unselected package libssl-dev:amd64.
Preparing to unpack .../27-libssl-dev_1.1.0j-1~deb9u1_amd64.deb ...
Unpacking libssl-dev:amd64 (1.1.0j-1~deb9u1) ...
Selecting previously unselected package libssl-doc.
Preparing to unpack .../28-libssl-doc_1.1.0j-1~deb9u1_all.deb ...
Unpacking libssl-doc (1.1.0j-1~deb9u1) ...
Selecting previously unselected package manpages-dev.
Preparing to unpack .../29-manpages-dev_4.10-2_all.deb ...
Unpacking manpages-dev (4.10-2) ...
Selecting previously unselected package pkg-config.
Preparing to unpack .../30-pkg-config_0.29-4+b1_amd64.deb ...
Unpacking pkg-config (0.29-4+b1) ...
Selecting previously unselected package zlib1g-dev:amd64.
Preparing to unpack .../31-zlib1g-dev_1%3a1.2.8.dfsg-5_amd64.deb ...
Unpacking zlib1g-dev:amd64 (1:1.2.8.dfsg-5) ...
Selecting previously unselected package crystal.
Preparing to unpack .../32-crystal_0.27.2-1_amd64.deb ...
Unpacking crystal (0.27.2-1) ...
Setting up manpages (4.10-2) ...
Setting up libcc1-0:amd64 (6.3.0-18+deb9u1) ...
Setting up libasan3:amd64 (6.3.0-18+deb9u1) ...
Setting up libcilkrts5:amd64 (6.3.0-18+deb9u1) ...
Setting up libubsan0:amd64 (6.3.0-18+deb9u1) ...
Setting up libtsan0:amd64 (6.3.0-18+deb9u1) ...
Setting up libssl-dev:amd64 (1.1.0j-1~deb9u1) ...
Setting up linux-libc-dev:amd64 (4.9.144-3) ...
Setting up libdpkg-perl (1.18.25) ...
Setting up liblsan0:amd64 (6.3.0-18+deb9u1) ...
Setting up libfile-fcntllock-perl (0.22-3+b2) ...
Setting up pkg-config (0.29-4+b1) ...
Setting up libmpx2:amd64 (6.3.0-18+deb9u1) ...
Processing triggers for libc-bin (2.24-11+deb9u4) ...
Setting up libevent-core-2.0-5:amd64 (2.0.21-stable-3) ...
Processing triggers for man-db (2.7.6.1-2) ...
Setting up libpcrecpp0v5:amd64 (2:8.39-3) ...
Setting up libpcre32-3:amd64 (2:8.39-3) ...
Setting up binutils (2.28-5) ...
Setting up libssl-doc (1.1.0j-1~deb9u1) ...
Setting up libc-dev-bin (2.24-11+deb9u4) ...
Setting up libpcre16-3:amd64 (2:8.39-3) ...
Setting up manpages-dev (4.10-2) ...
Setting up libc6-dev:amd64 (2.24-11+deb9u4) ...
Setting up libitm1:amd64 (6.3.0-18+deb9u1) ...
Setting up zlib1g-dev:amd64 (1:1.2.8.dfsg-5) ...
Setting up libpcre3-dev:amd64 (2:8.39-3) ...
Setting up libgcc-6-dev:amd64 (6.3.0-18+deb9u1) ...
Setting up libevent-pthreads-2.0-5:amd64 (2.0.21-stable-3) ...
Setting up libevent-extra-2.0-5:amd64 (2.0.21-stable-3) ...
Setting up gcc-6 (6.3.0-18+deb9u1) ...
Setting up libevent-openssl-2.0-5:amd64 (2.0.21-stable-3) ...
Setting up libevent-dev (2.0.21-stable-3) ...
Setting up gcc (4:6.3.0-4) ...
Setting up crystal (0.27.2-1) ...
Processing triggers for libc-bin (2.24-11+deb9u4) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package icu-devtools.
(Reading database ... 134745 files and directories currently installed.)
Preparing to unpack .../icu-devtools_57.1-6+deb9u2_amd64.deb ...
Unpacking icu-devtools (57.1-6+deb9u2) ...
Selecting previously unselected package libstdc++-6-dev:amd64.
Preparing to unpack .../libstdc++-6-dev_6.3.0-18+deb9u1_amd64.deb ...
Unpacking libstdc++-6-dev:amd64 (6.3.0-18+deb9u1) ...
Selecting previously unselected package libicu-dev.
Preparing to unpack .../libicu-dev_57.1-6+deb9u2_amd64.deb ...
Unpacking libicu-dev (57.1-6+deb9u2) ...
Selecting previously unselected package libxml2-dev:amd64.
Preparing to unpack .../libxml2-dev_2.9.4+dfsg1-2.2+deb9u2_amd64.deb ...
Unpacking libxml2-dev:amd64 (2.9.4+dfsg1-2.2+deb9u2) ...
Setting up libstdc++-6-dev:amd64 (6.3.0-18+deb9u1) ...
Processing triggers for man-db (2.7.6.1-2) ...
Setting up icu-devtools (57.1-6+deb9u2) ...
Setting up libicu-dev (57.1-6+deb9u2) ...
Setting up libxml2-dev:amd64 (2.9.4+dfsg1-2.2+deb9u2) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package libyaml-dev:amd64.
(Reading database ... 135876 files and directories currently installed.)
Preparing to unpack .../libyaml-dev_0.1.7-2_amd64.deb ...
Unpacking libyaml-dev:amd64 (0.1.7-2) ...
Setting up libyaml-dev:amd64 (0.1.7-2) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package libgmpxx4ldbl:amd64.
(Reading database ... 135883 files and directories currently installed.)
Preparing to unpack .../libgmpxx4ldbl_2%3a6.1.2+dfsg-1_amd64.deb ...
Unpacking libgmpxx4ldbl:amd64 (2:6.1.2+dfsg-1) ...
Selecting previously unselected package libgmp-dev:amd64.
Preparing to unpack .../libgmp-dev_2%3a6.1.2+dfsg-1_amd64.deb ...
Unpacking libgmp-dev:amd64 (2:6.1.2+dfsg-1) ...
Processing triggers for libc-bin (2.24-11+deb9u4) ...
Setting up libgmpxx4ldbl:amd64 (2:6.1.2+dfsg-1) ...
Setting up libgmp-dev:amd64 (2:6.1.2+dfsg-1) ...
Processing triggers for libc-bin (2.24-11+deb9u4) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package libtinfo-dev:amd64.
(Reading database ... 135902 files and directories currently installed.)
Preparing to unpack .../libtinfo-dev_6.0+20161126-1+deb9u2_amd64.deb ...
Unpacking libtinfo-dev:amd64 (6.0+20161126-1+deb9u2) ...
Selecting previously unselected package libreadline-dev:amd64.
Preparing to unpack .../libreadline-dev_7.0-3_amd64.deb ...
Unpacking libreadline-dev:amd64 (7.0-3) ...
Setting up libtinfo-dev:amd64 (6.0+20161126-1+deb9u2) ...
Setting up libreadline-dev:amd64 (7.0-3) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package gir1.2-rsvg-2.0:amd64.
(Reading database ... 135926 files and directories currently installed.)
Preparing to unpack .../00-gir1.2-rsvg-2.0_2.40.16-1+b1_amd64.deb ...
Unpacking gir1.2-rsvg-2.0:amd64 (2.40.16-1+b1) ...
Selecting previously unselected package libcairo-script-interpreter2:amd64.
Preparing to unpack .../01-libcairo-script-interpreter2_1.14.8-1_amd64.deb ...
Unpacking libcairo-script-interpreter2:amd64 (1.14.8-1) ...
Selecting previously unselected package libexpat1-dev:amd64.
Preparing to unpack .../02-libexpat1-dev_2.2.0-2+deb9u1_amd64.deb ...
Unpacking libexpat1-dev:amd64 (2.2.0-2+deb9u1) ...
Selecting previously unselected package libpng-dev:amd64.
Preparing to unpack .../03-libpng-dev_1.6.28-1_amd64.deb ...
Unpacking libpng-dev:amd64 (1.6.28-1) ...
Selecting previously unselected package libfreetype6-dev.
Preparing to unpack .../04-libfreetype6-dev_2.6.3-3.2_amd64.deb ...
Unpacking libfreetype6-dev (2.6.3-3.2) ...
Selecting previously unselected package libfontconfig1-dev:amd64.
Preparing to unpack .../05-libfontconfig1-dev_2.11.0-6.7+b1_amd64.deb ...
Unpacking libfontconfig1-dev:amd64 (2.11.0-6.7+b1) ...
Selecting previously unselected package xorg-sgml-doctools.
Preparing to unpack .../06-xorg-sgml-doctools_1%3a1.11-1_all.deb ...
Unpacking xorg-sgml-doctools (1:1.11-1) ...
Selecting previously unselected package x11proto-core-dev.
Preparing to unpack .../07-x11proto-core-dev_7.0.31-1_all.deb ...
Unpacking x11proto-core-dev (7.0.31-1) ...
Selecting previously unselected package libxau-dev:amd64.
Preparing to unpack .../08-libxau-dev_1%3a1.0.8-1_amd64.deb ...
Unpacking libxau-dev:amd64 (1:1.0.8-1) ...
Selecting previously unselected package libxdmcp-dev:amd64.
Preparing to unpack .../09-libxdmcp-dev_1%3a1.1.2-3_amd64.deb ...
Unpacking libxdmcp-dev:amd64 (1:1.1.2-3) ...
Selecting previously unselected package x11proto-input-dev.
Preparing to unpack .../10-x11proto-input-dev_2.3.2-1_all.deb ...
Unpacking x11proto-input-dev (2.3.2-1) ...
Selecting previously unselected package x11proto-kb-dev.
Preparing to unpack .../11-x11proto-kb-dev_1.0.7-1_all.deb ...
Unpacking x11proto-kb-dev (1.0.7-1) ...
Selecting previously unselected package xtrans-dev.
Preparing to unpack .../12-xtrans-dev_1.3.5-1_all.deb ...
Unpacking xtrans-dev (1.3.5-1) ...
Selecting previously unselected package libpthread-stubs0-dev:amd64.
Preparing to unpack .../13-libpthread-stubs0-dev_0.3-4_amd64.deb ...
Unpacking libpthread-stubs0-dev:amd64 (0.3-4) ...
Selecting previously unselected package libxcb1-dev:amd64.
Preparing to unpack .../14-libxcb1-dev_1.12-1_amd64.deb ...
Unpacking libxcb1-dev:amd64 (1.12-1) ...
Selecting previously unselected package libx11-dev:amd64.
Preparing to unpack .../15-libx11-dev_2%3a1.6.4-3+deb9u1_amd64.deb ...
Unpacking libx11-dev:amd64 (2:1.6.4-3+deb9u1) ...
Selecting previously unselected package x11proto-render-dev.
Preparing to unpack .../16-x11proto-render-dev_2%3a0.11.1-2_all.deb ...
Unpacking x11proto-render-dev (2:0.11.1-2) ...
Selecting previously unselected package libxrender-dev:amd64.
Preparing to unpack .../17-libxrender-dev_1%3a0.9.10-1_amd64.deb ...
Unpacking libxrender-dev:amd64 (1:0.9.10-1) ...
Selecting previously unselected package x11proto-xext-dev.
Preparing to unpack .../18-x11proto-xext-dev_7.3.0-1_all.deb ...
Unpacking x11proto-xext-dev (7.3.0-1) ...
Selecting previously unselected package libxext-dev:amd64.
Preparing to unpack .../19-libxext-dev_2%3a1.3.3-1+b2_amd64.deb ...
Unpacking libxext-dev:amd64 (2:1.3.3-1+b2) ...
Selecting previously unselected package libice-dev:amd64.
Preparing to unpack .../20-libice-dev_2%3a1.0.9-2_amd64.deb ...
Unpacking libice-dev:amd64 (2:1.0.9-2) ...
Selecting previously unselected package libsm-dev:amd64.
Preparing to unpack .../21-libsm-dev_2%3a1.2.2-1+b3_amd64.deb ...
Unpacking libsm-dev:amd64 (2:1.2.2-1+b3) ...
Selecting previously unselected package libpixman-1-dev.
Preparing to unpack .../22-libpixman-1-dev_0.34.0-1_amd64.deb ...
Unpacking libpixman-1-dev (0.34.0-1) ...
Selecting previously unselected package libxcb-render0-dev:amd64.
Preparing to unpack .../23-libxcb-render0-dev_1.12-1_amd64.deb ...
Unpacking libxcb-render0-dev:amd64 (1.12-1) ...
Selecting previously unselected package libxcb-shm0-dev:amd64.
Preparing to unpack .../24-libxcb-shm0-dev_1.12-1_amd64.deb ...
Unpacking libxcb-shm0-dev:amd64 (1.12-1) ...
Selecting previously unselected package libglib2.0-dev.
Preparing to unpack .../25-libglib2.0-dev_2.50.3-2_amd64.deb ...
Unpacking libglib2.0-dev (2.50.3-2) ...
Selecting previously unselected package libcairo2-dev.
Preparing to unpack .../26-libcairo2-dev_1.14.8-1_amd64.deb ...
Unpacking libcairo2-dev (1.14.8-1) ...
Selecting previously unselected package libgdk-pixbuf2.0-dev.
Preparing to unpack .../27-libgdk-pixbuf2.0-dev_2.36.5-2+deb9u2_amd64.deb ...
Unpacking libgdk-pixbuf2.0-dev (2.36.5-2+deb9u2) ...
Selecting previously unselected package libpng-tools.
Preparing to unpack .../28-libpng-tools_1.6.28-1_amd64.deb ...
Unpacking libpng-tools (1.6.28-1) ...
Selecting previously unselected package librsvg2-dev:amd64.
Preparing to unpack .../29-librsvg2-dev_2.40.16-1+b1_amd64.deb ...
Unpacking librsvg2-dev:amd64 (2.40.16-1+b1) ...
Selecting previously unselected package libx11-doc.
Preparing to unpack .../30-libx11-doc_2%3a1.6.4-3+deb9u1_all.deb ...
Unpacking libx11-doc (2:1.6.4-3+deb9u1) ...
Setting up libcairo-script-interpreter2:amd64 (1.14.8-1) ...
Setting up libpthread-stubs0-dev:amd64 (0.3-4) ...
Setting up libpng-tools (1.6.28-1) ...
Processing triggers for libglib2.0-0:amd64 (2.50.3-2) ...
Setting up xorg-sgml-doctools (1:1.11-1) ...
Setting up x11proto-kb-dev (1.0.7-1) ...
Processing triggers for sgml-base (1.29) ...
Setting up libglib2.0-dev (2.50.3-2) ...
Setting up xtrans-dev (1.3.5-1) ...
Processing triggers for libc-bin (2.24-11+deb9u4) ...
Setting up libpixman-1-dev (0.34.0-1) ...
Setting up gir1.2-rsvg-2.0:amd64 (2.40.16-1+b1) ...
Setting up libexpat1-dev:amd64 (2.2.0-2+deb9u1) ...
Setting up libx11-doc (2:1.6.4-3+deb9u1) ...
Processing triggers for man-db (2.7.6.1-2) ...
Setting up libpng-dev:amd64 (1.6.28-1) ...
Setting up x11proto-core-dev (7.0.31-1) ...
Setting up libxau-dev:amd64 (1:1.0.8-1) ...
Setting up libxdmcp-dev:amd64 (1:1.1.2-3) ...
Setting up libfreetype6-dev (2.6.3-3.2) ...
Setting up libice-dev:amd64 (2:1.0.9-2) ...
Setting up libxcb1-dev:amd64 (1.12-1) ...
Setting up x11proto-render-dev (2:0.11.1-2) ...
Setting up x11proto-input-dev (2.3.2-1) ...
Setting up libfontconfig1-dev:amd64 (2.11.0-6.7+b1) ...
Setting up libsm-dev:amd64 (2:1.2.2-1+b3) ...
Setting up libxcb-shm0-dev:amd64 (1.12-1) ...
Setting up libxcb-render0-dev:amd64 (1.12-1) ...
Setting up x11proto-xext-dev (7.3.0-1) ...
Setting up libx11-dev:amd64 (2:1.6.4-3+deb9u1) ...
Setting up libxrender-dev:amd64 (1:0.9.10-1) ...
Setting up libgdk-pixbuf2.0-dev (2.36.5-2+deb9u2) ...
Setting up libxext-dev:amd64 (2:1.3.3-1+b2) ...
Setting up libcairo2-dev (1.14.8-1) ...
Setting up librsvg2-dev:amd64 (2.40.16-1+b1) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package postgresql-client-common.
(Reading database ... 138361 files and directories currently installed.)
Preparing to unpack .../0-postgresql-client-common_181+deb9u2_all.deb ...
Unpacking postgresql-client-common (181+deb9u2) ...
Selecting previously unselected package postgresql-client-9.6.
Preparing to unpack .../1-postgresql-client-9.6_9.6.11-0+deb9u1_amd64.deb ...
Unpacking postgresql-client-9.6 (9.6.11-0+deb9u1) ...
Selecting previously unselected package ssl-cert.
Preparing to unpack .../2-ssl-cert_1.0.39_all.deb ...
Unpacking ssl-cert (1.0.39) ...
Selecting previously unselected package postgresql-common.
Preparing to unpack .../3-postgresql-common_181+deb9u2_all.deb ...
Adding 'diversion of /usr/bin/pg_config to /usr/bin/pg_config.libpq-dev by postgresql-common'
Unpacking postgresql-common (181+deb9u2) ...
Selecting previously unselected package postgresql-9.6.
Preparing to unpack .../4-postgresql-9.6_9.6.11-0+deb9u1_amd64.deb ...
Unpacking postgresql-9.6 (9.6.11-0+deb9u1) ...
Selecting previously unselected package postgresql.
Preparing to unpack .../5-postgresql_9.6+181+deb9u2_all.deb ...
Unpacking postgresql (9.6+181+deb9u2) ...
Selecting previously unselected package postgresql-contrib-9.6.
Preparing to unpack .../6-postgresql-contrib-9.6_9.6.11-0+deb9u1_amd64.deb ...
Unpacking postgresql-contrib-9.6 (9.6.11-0+deb9u1) ...
Selecting previously unselected package sysstat.
Preparing to unpack .../7-sysstat_11.4.3-2_amd64.deb ...
Unpacking sysstat (11.4.3-2) ...
Setting up sysstat (11.4.3-2) ...

Creating config file /etc/default/sysstat with new version
update-alternatives: using /usr/bin/sar.sysstat to provide /usr/bin/sar (sar) in auto mode
Setting up ssl-cert (1.0.39) ...
Setting up postgresql-client-common (181+deb9u2) ...
Processing triggers for systemd (232-25+deb9u8) ...
Setting up postgresql-common (181+deb9u2) ...
Adding user postgres to group ssl-cert

Creating config file /etc/postgresql-common/createcluster.conf with new version

Creating config file /etc/logrotate.d/postgresql-common with new version
Building PostgreSQL dictionaries from installed myspell/hunspell packages...
 en_us
Removing obsolete dictionary files:
Created symlink /etc/systemd/system/multi-user.target.wants/postgresql.service → /lib/systemd/system/postgresql.service.
Processing triggers for man-db (2.7.6.1-2) ...
Setting up postgresql-client-9.6 (9.6.11-0+deb9u1) ...
update-alternatives: using /usr/share/postgresql/9.6/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode
Setting up postgresql-9.6 (9.6.11-0+deb9u1) ...
Creating new cluster 9.6/main ...
 config /etc/postgresql/9.6/main
 data   /var/lib/postgresql/9.6/main
 locale en_US.UTF-8
 socket /var/run/postgresql
 port   5432
update-alternatives: using /usr/share/postgresql/9.6/man/man1/postmaster.1.gz to provide /usr/share/man/man1/postmaster.1.gz (postmaster.1.gz) in auto mode
Setting up postgresql (9.6+181+deb9u2) ...
Setting up postgresql-contrib-9.6 (9.6.11-0+deb9u1) ...
Processing triggers for systemd (232-25+deb9u8) ...
dpkg-preconfigure: unable to re-open stdin: No such file or directory
Selecting previously unselected package libsqlite3-dev:amd64.
(Reading database ... 139338 files and directories currently installed.)
Preparing to unpack .../libsqlite3-dev_3.16.2-5+deb9u1_amd64.deb ...
Unpacking libsqlite3-dev:amd64 (3.16.2-5+deb9u1) ...
Setting up libsqlite3-dev:amd64 (3.16.2-5+deb9u1) ...
➜ User invidious Not Found, adding user
➜ Downloading Invidious from GitHub
Cloning into 'invidious'...
remote: Enumerating objects: 150, done.
remote: Counting objects: 100% (150/150), done.
remote: Compressing objects: 100% (106/106), done.
remote: Total 7066 (delta 76), reused 102 (delta 44), pack-reused 6916
Receiving objects: 100% (7066/7066), 13.25 MiB | 4.66 MiB/s, done.
Resolving deltas: 100% (4230/4230), done.
Note: checking out '0.14.1'.

You are in 'detached HEAD' state. You can look around, make experimental
changes and commit them, and you can discard any commits you make in this
state without impacting any branches by performing another checkout.

If you want to create a new branch to retain commits you create, you may
do so (now or later) by using -b with the checkout command again. Example:

 git checkout -b <new-branch-name>

HEAD is now at 09d0972... Pull dash URL from player response
You are not currently on a branch.
Please specify which branch you want to merge with.
See git-pull(1) for details.

   git pull <remote> <branch>

➜ Done
/home/invidious
Synchronizing state of postgresql.service with SysV service script with /lib/systemd/systemd-sysv-install.
Executing: /lib/systemd/systemd-sysv-install enable postgresql
➜ Creating user kemal with password kemal 
CREATE ROLE
➜ Creating database invidious with owner kemal
CREATE DATABASE
➜ Grant all on database invidious to user kemal
GRANT
➜ Running channels.sql
CREATE TABLE
GRANT
CREATE INDEX
➜ Running videos.sql
CREATE TABLE
GRANT
CREATE INDEX
➜ Running channel_videos.sql
CREATE TABLE
GRANT
CREATE INDEX
CREATE INDEX
➜ Running users.sql
CREATE TABLE
GRANT
CREATE INDEX
➜ Running session_ids.sql
CREATE TABLE
GRANT
CREATE INDEX
➜ Running nonces.sql
CREATE TABLE
GRANT
CREATE INDEX
✔ Finished Database section
➜ Updating config.yml with new info...
✔ Done.
Fetching https://github.com/detectlanguage/detectlanguage-crystal.git
Fetching https://github.com/kemalcr/kemal.git
Fetching https://github.com/luislavena/radix.git
Fetching https://github.com/jeromegn/kilt.git
Fetching https://github.com/crystal-loot/exception_page.git
Fetching https://github.com/will/crystal-pg.git
Fetching https://github.com/crystal-lang/crystal-db.git
Fetching https://github.com/crystal-lang/crystal-sqlite3.git
Installing detect_language (0.1.0 at 0.2.0)
Installing kemal (0.24.0 at afd17fc)
Installing radix (0.3.9)
Installing kilt (0.4.0)
Installing exception_page (0.1.2)
Installing pg (0.15.0)
Installing db (0.5.1)
Installing sqlite3 (0.10.0)
Created symlink /etc/systemd/system/multi-user.target.wants/invidious.service → /lib/systemd/system/invidious.service.
✔ Invidious service has been successfully installed!
● invidious.service - Invidious (An alternative YouTube front-end)
  Loaded: loaded (/lib/systemd/system/invidious.service; enabled; vendor preset: enabled)
  Active: active (running) since Wed 2019-02-27 21:45:07 CET; 45ms ago
Main PID: 19768 ((nvidious))
   Tasks: 0 (limit: 4915)
  CGroup: /system.slice/invidious.service
          └─19768 (nvidious)

Feb 27 21:45:07 debian9-univ systemd[1]: Started Invidious (An alternative Y…d).
Hint: Some lines were ellipsized, use -l to show in full.


╔═══════════════════════════════════════════════════════════════════╗
║                        Invidious Update.sh                        ║
║               Automatic update script for Invidio.us              ║
║                      Maintained by @tmiland                       ║
║                          version: 1.2.7                           ║
╚═══════════════════════════════════════════════════════════════════╝




Thank you for using the Invidious Update.sh script.



✔ Invidious install done. Now visit http://localhost:3000




Documentation for this script is available here: 
➜ https://github.com/tmiland/Invidious-Updater



╔═══════════════════════════════════════════════════════════════════╗
║                        Invidious Update.sh                        ║
║               Automatic update script for Invidio.us              ║
║                      Maintained by @tmiland                       ║
║                          version: 1.2.7                           ║
╚═══════════════════════════════════════════════════════════════════╝

Welcome to the Invidious Update.sh script.

What do you want to do?
  1) Install Invidious
  2) Update Invidious
  3) Deploy with Docker
  4) Install Invidious service
  5) Run Database Maintenance
  6) Run Database Migration
  7) Uninstall Invidious
  8) Exit

Documentation for this script is available here: 
➜ https://github.com/tmiland/Invidious-Updater

Select an option [1-8]: 
